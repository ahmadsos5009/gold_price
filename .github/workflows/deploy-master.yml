name: deploy-master
on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: borales/actions-yarn@v2.0.0
        with:
          cmd: install # will run `yarn install` command
      - uses: borales/actions-yarn@v2.0.0
        with:
          cmd: build # will run `yarn build` command

      - name: Config Assets For Surge
        run: mv ./build/index.html ./build/200.html

      - name: Deploying website
        run: npm install -g surge

      - name: Deploying website
        run: surge --project ./build/ ${{ secrets.SURGE_DOMAIN }} --token ${{ secrets.SURGE_TOKEN }}

      - run: echo "Please visit => ${{ secrets.SURGE_DOMAIN }}"
